<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viert" content="width=device-width, initial-scale=1">
    <title></title>
    <link href="http://cdn.bootcss.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="http://cdn.bootcss.com/animate.css/3.4.0/animate.min.css" rel="stylesheet">
    <link href="/assets/css/ct.min.css" rel="stylesheet">
    <link href="/assets/css/docs.css" rel="stylesheet">
    <link href="/assets/css/pygments.css" rel="stylesheet">
    <link href="/assets/css/layout.css" rel="stylesheet">
</head>

<body>
    <!--header code -->
    <header class="header liner-bg">
  <div class="ct-container">
    <div class="navigation">
      <div class="navbar-header">
        <a class="logo ct-fl" href="/">
          <img src="/assets/images/docs-logo.png" alt="logo">
        </a>
        <a href="/" class="navbar-toggle ct-fr"><i class="fa fa-reorder"></i></a>
      </div>
      <div class="navbar-collapse collapse ct-fr">
        <nav class="nav">
          <a href="index.html">index</a>
          <a href="explore.html">explore</a>
          <a href="docs.html">Docs</a>
          <a href="app.html">apps</a>
          <a href="user.html">user</a>
          <div class="lang-select">
  <a class="lang" href="javascript:;">
    <span>
      
        简体中文
      
      <i class="fa fa-caret-down"></i>
    </span>
  </a>
  <ul class="dropdown-lang">
    <li class="dropdown-header">选择语言</li>
    <li class="divider"></li>
    
      <li><a href="/en">English</a></li>
      <li class="cur"><a href="/">简体中文</a></li>
      <li><a href="/zh-tw">正體中文</a></li>
    
  </ul>
</div>

      </div>
      </nav>
    </div>
  </div>
  </div>
</header>

    <!--docs code-->
    <section class="docs">
        <div class="ct-container">
            <div class="ct-row">
                <!--left code-->
                <div class="ct-md-3 sidebar-nav border-right">
                    <h4>开始使用</h4>
<ul>
  <li>
    <a href="/home.html" >
      <span>概述</span>
    </a>
  </li>
  <li>
    <a href="/installation.html">
      <span>安装</span>
    </a>
  </li>
  <li>
    <a href="/setup.html">
      <span>建站</span>
    </a>
  </li>
  <li>
    <a href="/configuration.html">
      <span>配置</span>
    </a>
  </li>
  <li>
    <a href="/usage.html">
      <span>命令</span>
    </a>
  </li>
  <li>
    <a href="/structure.html">
      <span>目录结构</span>
    </a>
  </li>
  <li>
    <a href="/migrations.html">
      <span>迁移</span>
    </a>
  </li>
</ul>
<h4>基本操作
</h4>
<ul>
  <li>
    <a href="/frontmatter.html">
      <span>头部配置信息</span>
    </a>
  </li>
  <li>
    <a href="/posts.html">
      <span>文章</span>
    </a>
  </li>
  <li>
    <a href="/drafts.html">
      <span>草稿</span>
    </a>
  </li>
  <li>
    <a href="/pages.html">
      <span>页面</span>
    </a>
  </li>
  <li>
    <a href="/static-files.html">
      <span>静态文件</span>
    </a>
  </li>
  <li>
    <a href="/variables.html">
      <span>变量</span>
    </a>
  </li>
  <li>
    <a href="/collections.html">
      <span>集合（Collections）</span>
    </a>
  </li>
  <li>
    <a href="/datafiles.html">
      <span>数据文件</span>
    </a>
  </li>
  <li>
    <a href="/assets.html">
      <span>资源</span>
    </a>
  </li>
</ul>
<h4>自定义</h4>
<ul>
  <li>
    <a href="/templates.html">
      <span>模板</span>
    </a>
  </li>
  <li>
    <a href="/permalinks.html">
      <span>永久链接</span>
    </a>
  </li>
  <li>
    <a href="/pagination.html">
      <span>分页功能</span>
    </a>
  </li>
  <li>
    <a href="/plugins.html">
      <span>插件</span>
    </a>
  </li>
  <li>
    <a href="/highlight.html">
      <span>代码高亮</span>
    </a>
  </li>
  <li>
    <a href="/extras.html">
      <span>附加功能</span>
    </a>
  </li>
</ul>
<h4>示例</h4>
<ul>
  <li>
    <a href="/article.html">
      <span>文章列表</span>
    </a>
  </li>
  <li>
    <a href="/single-article.html">
      <span>调取指定栏目文章列表</span>
    </a>
  </li>
  <li>
    <a href="/all-article.html">
      <span>按分类调取所有文章</span>
    </a>
  </li>
  <li>
    <a href="/tags-article.html">
      <span>按标签调取所有文章</span>
    </a>
  </li>
  <li>
    <a href="/rss.html">
      <span>RSS订阅页面</span>
    </a>
  </li>
  <li>
    <a href="/sitemap.html">
      <span>Sitemap</span>
    </a>
  </li>
  <li>
    <a href="/field.html">
      <span>字段</span>
    </a>
  </li>
  <li>
    <a href="https://github.com/Shopify/liquid/wiki/Liquid-for-Designers" target="_blank">
      <span>Liquid 用法说明（英文）</span>
    </a>
  </li>
  <li>
    <a href="https://github.com/get3w/docs.get3w.com/wiki" target="_blank">
      <span>Liquid 用法笔记</span>
    </a>
  </li>
</ul>
<h4>其他</h4>
<ul>
  <li>
    <a href="/github-pages.html">
      <span>GitHub Pages</span>
    </a>
  </li>
  <li>
    <a href="/deployment-methods.html">
      <span>部署方法</span>
    </a>
  </li>
  <li>
    <a href="/continuous-integration.html" class="active">
      <span>持续集成</span>
    </a>
  </li>
  <li>
    <a href="/troubleshooting.html">
      <span>常见问题</span>
    </a>
  </li>
  <li>
    <a href="/sites.html">
      <span>使用 Get3w 的站点</span>
    </a>
  </li>
  <li>
    <a href="/resources.html">
      <span>相关资源</span>
    </a>
  </li>
  <li>
    <a href="/upgrading.html">
      <span>升级</span>
    </a>
  </li>
  <li>
    <a href="/example.html">
      <span>示例</span>
    </a>
  </li>
  <li>
    <a href="/history.html">
      <span>History</span>
    </a>
  </li>
</ul>

                </div>
                <!--right code-->
                <div class="ct-md-9">
                    <div class="docs-content">
                        <div class="docs-header">
                            <nav class="ct-fr suggest">
                                <a href="#disqus"><i class="fa fa-pencil"></i> Suggest Edits
</a>
                            </nav>
                            <h1>持续集成</h1>
                            <hr>
                        </div>
                        <div class="docs-section">
                            <p>对应于 Ruby 的一个或多个版本，你很轻松就可以测试你的网站构建。以下指引将展示怎样在 <a href="https://travis-ci.org/">Travis</a> 上建立一个免费的，集成了处理 pull 请求的 <a href="https://github.com/">GitHub</a> 的构建环境。如果你使用私有代码库的话，也有相应的付费选择。</p>

<h2>1. 启用 Travis 以及 Github</h2>

<p>启用 Travis 来构建你的 Github 代码库非常简单：</p>

<ol>
<li>前往你在 travis-ci.org 的个人档案: https://travis-ci.org/profile/username</li>
<li>选择需要启用构建的代码库。</li>
<li>点击右侧的滑动按钮使其处于 &quot;ON&quot; 位置并成为深灰色。</li>
<li>点击扳手图标可以进行一些配置，使用 <code>.travis.yaml</code> 文件可以进行更大范围的配置。更多详情可见于其下方。</li>
</ol>

<h2>2. 测试代码</h2>

<p>最简单的测试代码是运行 <code>jekyll build</code> 来确保 Jekyll 对站点的构建不会出错。它并不检查站点的输出结果，而只确保构建正确地进行。</p>

<p>当需要测试 Jekyll 的输出结果时，<a href="https://github.com/gjtorikian/html-proofer">html-proofer</a> 是最佳的工具选择。这个工具会检查输出站点中所有的链接和图片的有效性。可以很方便地使用命令行 <code>htmlproof</code> 执行该工具，或者写一段 Ruby 代码来执行该 gem 。</p>

<h3>HTML Proofer 命令行执行</h3>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#!/usr/bin/env bash</span>
<span class="nb">set</span> -e <span class="c"># 出错时中止代码</span>

bundle <span class="nb">exec </span>jekyll build
bundle <span class="nb">exec </span>htmlproof ./_site</code></pre></figure>

<p>命令行执行时可通过参数切换一些选项。关于这些选项的信息请查看 <code>html-proofer</code> 的 README 文件，或者本地运行 <code>htmlproof --help</code> 。</p>

<h3>HTML Proofer 库</h3>

<p>你也可以通过 Ruby 脚本来调用 <code>html-proofer</code>(例如在一个 Rakefile 中):</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1">#!/usr/bin/env ruby</span>

<span class="nb">require</span> <span class="s1">'html/proofer'</span>
<span class="no">HTML</span><span class="o">::</span><span class="no">Proofer</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"./_site"</span><span class="p">).</span><span class="nf">run</span></code></pre></figure>

<p>选项作为 <code>.new</code> 的第二参数传入，并编码为符号型键值的 Ruby 哈希 (symbol-keyed Ruby Hash)。要获得更多关于配置的选项，请参阅 <code>html-proofer</code> 的 README 文档。</p>

<h2>3. 配置你的 Travis 构建</h2>

<p>该文件用于配置你的 Travis 构建。由于 Jekyll 是基于 Ruby 的而且需要 RubyGems 来进行安装，我们使用 Ruby 语言环境。 范例的 <code>.travis.yml</code> 文件如下，后面会有每一行相应的解释。</p>

<p><strong>注意：</strong> 你同时也需要一个 Gemfile, 基于相关的 gems, <a href="http://docs.travis-ci.com/user/languages/ruby/#Dependency-Management">Travis 将会自动安装</a> 依赖组件：</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">source</span> <span class="s2">"https://rubygems.org"</span>

<span class="n">gem</span> <span class="s2">"jekyll"</span>
<span class="n">gem</span> <span class="s2">"html-proofer"</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="s">language</span><span class="pi">:</span> <span class="s">ruby</span>
<span class="s">rvm</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">2.1</span>
<span class="c1"># 假如 bundler 被使用，安装时将运行 `bundle install`.</span>
<span class="s">script</span><span class="pi">:</span> <span class="s">./script/cibuild</span>

<span class="c1"># 分支白名单</span>
<span class="s">branches</span><span class="pi">:</span>
  <span class="s">only</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">gh-pages</span>     <span class="c1"># 测试 gh-pages 分支</span>
  <span class="pi">-</span> <span class="s">/pages-(.*)/</span> <span class="c1"># 测试每一个以 "pages-" 开头的分支</span>

<span class="s">env</span><span class="pi">:</span>
  <span class="s">global</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">NOKOGIRI_USE_SYSTEM_LIBRARIES=true</span> <span class="c1"># 为 html-proofer 的安装加速</span></code></pre></figure>

<p>Ok, 接下来是每一行的解释：</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="s">language</span><span class="pi">:</span> <span class="s">ruby</span></code></pre></figure>

<p>这一行告诉 Travis 应该使用一个 Ruby 构建容器。这将给予你 Bundler, RubyGems, 和一个 Ruby 运行库的脚本访问权。</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="s">rvm</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">2.1</span></code></pre></figure>

<p>RVM 是一个流行的 Ruby 版本管理器 (像 rbenv, chruby, 等等). 这一指令告诉 Travis 用来运行测试脚本的 Ruby 的版本。</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="s">script</span><span class="pi">:</span> <span class="s">./script/cibuild</span></code></pre></figure>

<p>Travis 允许用户运行任意自定义 shell 脚本来测试你的站点。惯用的一种方式是将项目的所有脚本放在 <code>script</code> 目录下，并将你的测试代码命名为 <code>cibuild</code>。当然这些都是可以完全自定义的。如果你的代码变化并不大，你也可以把你的测试语句这样写：</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="s">install</span><span class="pi">:</span> <span class="s">gem install jekyll html-proofer</span>
<span class="s">script</span><span class="pi">:</span> <span class="s">jekyll build &amp;&amp; htmlproof ./_site</span></code></pre></figure>

<p>此处的 <code>script</code> 指令可以是任何合法的 shell 命令。</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="c1"># 分支白名单</span>
<span class="s">branches</span><span class="pi">:</span>
  <span class="s">only</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">gh-pages</span>     <span class="c1"># 测试 gh-pages 分支</span>
  <span class="pi">-</span> <span class="s">/pages-(.*)/</span> <span class="c1"># 测试以 "pages-" 开头的所有分支</span></code></pre></figure>

<p>我们需要确保 Travis 为且只为包含了我们站点的分支进行构建，这可以通过在 Travis 的配置文件中加入一个分支白名单来实现。明确地加入 <code>gh-pages</code> 分支可以保证相关的 (上述) 测试脚本只在站点分支上运行。如果你使用 pull request flow 来提交修改，你可能希望添加一个构建规则，例如以上的正则表达式 <code>/pages-(.*)/</code>，让构建测试也涵盖了带有 pages 前缀的修改过的分支。</p>

<p><code>branches</code> 指令是完全可选的。</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="s">env</span><span class="pi">:</span>
  <span class="s">global</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">NOKOGIRI_USE_SYSTEM_LIBRARIES=true</span> <span class="c1"># 加速 html-proofer 的安装</span></code></pre></figure>

<p>如果你在使用 <code>html-proofer</code>，建议使用这个环境变量。Nokogiri 在站点编译后被用来解析 HTML 文件，它每次安装都必须编译一遍所带的库文件。幸运的是，我们把环境变量 <code>NOKOGIRI_USE_SYSTEM_LIBRARIES</code> 设为 <code>true</code> 之后，将极大地降低 Nokogiri 所需的安装时间。</p>

<div class="ct-alert ct-mb-lg ct-left --warning">
  <div class="inner">
    <i class="fa fa-info ct-color-red"></i>
    <div class="content">
    <span class="ct-h6">请确认将 <code>vendor</code> 从你的
     <code>_config.yml</code> 中排除 (exclude)</span><br>
    Travis 在它的构建服务器下的 <code>vendor</code> 目录中捆绑了所有的 gem, Jekyll 在此目录下会进行错误的读取并导致更严重的后果。
    </div>
  </div>
</div>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="s">exclude</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">vendor</span><span class="pi">]</span></code></pre></figure>

<h3>有疑问?</h3>

<p>这篇指引完全是开源的。如果你想修复一个错误，可以前往 <a href="https://github.com/xcatliu/jekyllcn/edit/master/site/_docs/continuous-integration.md">编辑</a> 。假如你遇到了麻烦并需要一些帮助，请前往 <a href="https://talk.jekyllrb.com/">求助</a></p>

                            <!-- <div class="ct-clearfix ct-mx">
                              
                              <a class="ct-fl"  href="/variables" title="常用变量">&larr; Prev</a>
                              
                              
                              <a class="ct-fr" href="/deployment-methods" title="部署方法">Next &rarr;</a>
                              
                            </div> -->
                            <br>
                            
                              <div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = /continuous-integration; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//get3wcom.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--go code-->
<section class="go">
    <div class="ct-container ct-center">
        getting started is easy.be up and running in minutes
        <a href="/" class="g3-btn register-btn">get started <i class="fa fa-angle-right"></i></a>
    </div>
</section>
<!--footer code-->
<footer class="footer">
    <div class="ct-container">
        <div class="ct-row">
            <div class="ct-md-3 ct-sm-12">
                <a href="/" class="footer-logo"><img src="/assets/images/docs-logo2.png"></a>
            </div>
            <nav class="ct-md-2 ct-sm-6">
                <h4 class="footer-title">tour</h4>
                <a href="/">Overview</a>
                <a href="/">Features</a>
                <a href="/">Business</a>
            </nav>
            <nav class="ct-md-2 ct-sm-6">
                <h4 class="footer-title">learn</h4>
                <a href="/">Support</a>
                <a href="/">Libraries</a>
                <a href="/">Documentation</a>
            </nav>
            <nav class="ct-md-2 ct-sm-6">
                <h4 class="footer-title">company</h4>
                <a href="/">Our Team</a>
                <a href="/">Jobs</a>
                <a href="/">BuPress Kitsiness</a>
            </nav>
            <nav class="ct-md-3 ct-sm-6">
                <h4 class="footer-title">contact</h4>
                <p>+1 (415) 735-4170
                    <br><a href="/">Contact us</a></p>
                <address>101 15th Street,
                    <br>San Francisco, CA 94103</address>
            </nav>
        </div>
    </div>
    <div class="ct-container">
        <div class="footer-legal ct-md-offset-3 ct-md-9">
            © 2015 Get3w.com
            <nav class="legal-nav">
                <a href="/">About Us</a>
                <a href="/">Contact Us</a>
            </nav>
        </div>
    </div>
</footer>

<script src="http://cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
<script src="/assets/js/docs.js"></script>

</body>
</html>
